import{C as S}from"./CodeMng-tK_C0XfL.js";import{i as y,u as B,d as E,r as l,b as L,e as i,o as s,c,a as u,f as N,F as V,v as I,j as b,t as U,h as f,w as D}from"./index-BfBCmJdN.js";import{e as F}from"./confirm-DlTTQfWL.js";const O={class:"section-area"},A={class:"article-area"},K={class:"mb-8 space-y-8 lg:flex lg:gap-x-0 lg:space-y-0"},Y={class:"lg:w-5/12 h-full"},j={class:"lg:w-7/12 h-full"},q={key:0},J={__name:"MenuMngPage",setup(H){const v=y("axios");y("msg"),B(),E();const _=l(null),h=l(null);l(null);const m=l([]),n=l([]),g=l(!0);l("first"),l(""),l([]),l(null);const p=l([]);L(()=>{M(),v.get("menu").then(t=>{m.value.push(t.data[0]||{menuId:null,menuNm:"전체"}),_.value.initNodeKeys()}).finally(()=>{g.value=!1})});const x=t=>n.value=t,k=()=>{const e=Array.from(h.value.querySelectorAll("input")).find(a=>!a.disabled);e&&e.focus()},M=()=>{function t(e,a=[]){return e.forEach(d=>{a.push(d),d.children&&d.children.length&&t(d.children,a)}),a}v.get("/route").then(e=>{p.value=Object.assign([],t(e.data))})},C=t=>{F("자동완성을 사용하시겠습니까?","자동완성").then(()=>{const e=p.value.find(a=>a.routeId===t);n.value.routeId=e.routeId,n.value.menuNm=e.routeNm,n.value.menuDes=e.routeDes,n.value.useYn="Y"})};return(t,e)=>{const a=i("el-divider"),d=i("el-option"),R=i("el-select"),w=i("el-input");return s(),c("section",O,[u("article",A,[u("div",K,[u("div",Y,[u("div",null,[N(S,{data:m.value,"save-url":"/menu",filter:"","show-node-key":"","node-key":"menuId","upr-node-key":"uprMenuId","code-type":"MN","tree-props":{label:"menuNm",value:"menuId"},draggable:"",onNodeSelect:x,onKeyupEnter:k,ref_key:"treeRef",ref:_},null,8,["data"])])]),u("div",null,[N(a,{direction:"vertical",class:"!h-full"})]),u("div",j,[u("div",null,[g.value?b("",!0):(s(),c("div",{key:0,ref_key:"formRef",ref:h,class:"space-y-1"},[e[0]||(e[0]=u("p",{class:"text-xl"},"상세보기",-1)),(s(!0),c(V,null,I(Object.keys(m.value[0]),(o,P)=>(s(),c("div",{key:o},[o!="children"?(s(),c("div",q,[u("p",null,U(o),1),o==="routeId"?(s(),f(R,{key:0,modelValue:n.value[o],"onUpdate:modelValue":r=>n.value[o]=r,onChange:C,filterable:"",clearable:""},{default:D(()=>[(s(!0),c(V,null,I(p.value,r=>(s(),f(d,{key:r.routeNm,label:r.routeNm,value:r.routeId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(s(),f(w,{key:1,modelValue:n.value[o],"onUpdate:modelValue":r=>n.value[o]=r,disabled:["menuId","uprMenuId","parent","menu","menuOrd"].includes(o)},null,8,["modelValue","onUpdate:modelValue","disabled"]))])):b("",!0)]))),128))],512))])])])])])}}};export{J as default};
