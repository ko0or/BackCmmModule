import{E as le,B as te,b as ae,q as oe,r as v,s as p,o as x,c as ne,a as i,i as l,x as a,F as re,h as r,A as R,t as V,l as T,C as O,D as q}from"./index-ByRtBCC3.js";/* empty css                                                                     */const k=(N,s)=>le.confirm(N,s,{confirmButtonText:"확인",cancelButtonText:"취소"}),ue=()=>k("저장 하시겠습니까?","저장"),de=()=>k("삭제 하시겠습니까?","삭제"),F={SUCCESS:"success",Warning:"warning",Info:"info",Error:"error"},w=(N,s,S)=>{te({title:N,message:s,type:S})},se=()=>{w("저장 성공","작성된 내용이 등록되었습니다",F.SUCCESS)},ie=()=>{w("삭제 성공","선택한 내용이 삭제되었습니다",F.SUCCESS)},me={class:"section-area"},pe={class:"article-area"},ce={__name:"MainPage",setup(N){ae(()=>{b()});const s=oe("axios"),S=v("0"),c={getContainerAll:async()=>{const e=(await s.get("/docker/container")).data.string;return c.jsonParser(e)},getImageAll:async()=>{const e=(await s.get("/docker/image")).data.string;return c.jsonParser(e)},jsonParser:o=>{if(!o)return[];const e=o.trim().split(/\r?\n/);return Object.assign([],e.map(u=>JSON.parse(u)))},startContainer:(o,e)=>{k("컨테이너를 실행하시겠습니까?","컨테이너").then(()=>{s.post("/docker/container/start",{containerName:o.ID}).then(u=>{w("컨테이너","컨테이너 실행 완료","success"),e&&e()})})},pullImage:(o,e)=>{k("이미지를 다운로드하시겠습니까?","이미지").then(()=>{s.post("/docker/image/pull",o).then(u=>{w("이미지","이미지 다운로드 완료","success"),e&&e()})})},startImage:(o,e)=>{k("이미지를 실행하시겠습니까?","이미지").then(()=>{s.post("/docker/image/start",o).then(u=>{w("이미지","이미지 실행 완료","success"),e&&e()})})},stopContainer:(o,e)=>{k("컨테이너를 중단하시겠습니까?","컨테이너").then(()=>{s.post("/docker/container/stop",{containerName:o.ID}).then(u=>{w("컨테이너","컨테이너 중단 완료","success"),e&&e()})})},delContainer:(o,e)=>{k("컨테이너를 삭제하시겠습니까?","컨테이너").then(()=>{s.post("/docker/container/delete",{containerName:o.ID}).then(u=>{w("컨테이너","컨테이너 삭제 완료","success"),e&&e()})})},delImage:(o,e)=>{k("이미지를 삭제하시겠습니까?","이미지").then(()=>{s.post("/docker/image/delete",{imageName:o.ID}).then(()=>{w("이미지","이미지 삭제 완료","success"),e&&e()})})}},E=v([]),A=v([]),B=v([]),y=v(!1),f=v({imageName:null,containerName:null,etrPort:12e3,itrPort:8080}),_=v(!1),j=v({imageName:null}),D=v(!1),d=v({projectUid:null,projectName:null,projectUrl:null,containerName:null,imageName:null,etrPort:null,itrPort:null,domainSdate:null,domainEdate:null,sslSdate:null,sslEdate:null}),b=async()=>{E.value=await W(),A.value=await c.getContainerAll(),B.value=await c.getImageAll()},Z=o=>{const e=Object.assign({},o);f.value.imageName=e.Repository,f.value.containerName=e.Repository.split("/").reverse()[0],y.value=!0},z=()=>{c.startImage(f.value,()=>{y.value=!1,b()})},J=o=>{_.value=!0},L=()=>{c.pullImage(j.value,()=>{_.value=!1,b()})},W=async()=>{const o=await s.get("/docker/project");return Object.assign([],o.data||[])},G=o=>{D.value=!0},K=()=>{ue().then(()=>{s.post("/docker/project/save",d.value).then(()=>{D.value=!1,se(),b()})})},Q=o=>{de().then(()=>{s.post("/docker/project/delete").then(e=>{ie(),b()})})},X=o=>{},h=()=>{window.open("https://xn--220b31d95hq8o.xn--3e0b707e/page/domain_conf_list.php")};return(o,e)=>{const u=p("el-button"),n=p("el-table-column"),C=p("el-col"),P=p("el-row"),U=p("el-table"),M=p("el-collapse-item"),ee=p("el-collapse"),g=p("el-input"),m=p("el-descriptions-item"),I=p("el-descriptions"),H=p("el-dialog"),$=p("el-date-picker");return x(),ne(re,null,[i("section",me,[i("article",pe,[l(ee,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=t=>S.value=t)},{default:a(()=>[l(M,{name:"0"},{title:a(()=>[e[21]||(e[21]=i("p",null,"내 프로젝트",-1)),e[22]||(e[22]=r("     ")),l(u,{link:"",type:"primary",onClick:R(G,["stop"])},{default:a(()=>e[20]||(e[20]=[r(" 추가 ")])),_:1})]),default:a(()=>[l(U,{data:E.value,border:""},{default:a(()=>[l(n,{prop:"projectName",label:"프로젝트명"}),l(n,{label:"상태",align:"center"},{default:a(t=>e[23]||(e[23]=[r(" 실행중 ")])),_:1}),l(n,{label:"도메인",align:"center"},{default:a(()=>[l(n,{prop:"domainSdate",label:"시작일",align:"center"},{default:a(t=>[r(V(t.row.domainSdate||"-"),1)]),_:1}),l(n,{prop:"domainEdate",label:"종료일",align:"center"},{default:a(t=>[r(V(t.row.domainEdate||"-"),1)]),_:1})]),_:1}),l(n,{label:"인증서",align:"center"},{default:a(()=>[l(n,{prop:"sslSdate",label:"시작일",align:"center"},{default:a(t=>[r(V(t.row.sslSdate||"-"),1)]),_:1}),l(n,{prop:"sslEdate",label:"종료일",align:"center"},{default:a(t=>[r(V(t.row.sslEdate||"-"),1)]),_:1})]),_:1}),l(n,{label:"작업",align:"center"},{default:a(t=>[l(P,{justify:"center"},{default:a(()=>[l(C,{span:12},{default:a(()=>[l(u,{class:"w-full",link:"",type:"info",onClick:Q},{default:a(()=>e[24]||(e[24]=[r(" 삭제 ")])),_:1})]),_:1}),l(C,{span:12},{default:a(()=>[l(u,{class:"w-full",link:"",type:"primary",onClick:X},{default:a(()=>e[25]||(e[25]=[r(" 관리 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1}),l(M,{name:"1"},{title:a(()=>e[26]||(e[26]=[i("p",null,"컨테이너 목록",-1)])),default:a(()=>[l(U,{data:A.value,border:""},{default:a(()=>[l(n,{prop:"ID",label:"컨테이너 식별자"}),l(n,{prop:"Names",label:"컨테이너명"}),l(n,{prop:"Ports",label:"포트"},{default:a(t=>[r(V(t.row.Ports||"-"),1)]),_:1}),l(n,{prop:"State",label:"상태"},{default:a(t=>[r(V(t.row.State==="created"&&"실행전"||t.row.State==="running"&&"실행중"||t.row.State==="paused"&&"일시정지"||t.row.State==="restarting"&&"재시작중"||t.row.State==="exited"&&"종료"||t.row.State==="dead"&&"중단(복구불가)"||t.row.State==="removing"&&"삭제중"||t.row.State||"-"),1)]),_:1}),l(n,{prop:"Image",label:"연관 이미지"}),l(n,{label:"생성일시",align:"center"},{default:a(t=>[r(V(T(O)(t.row.CreatedAt,"YYYY-MM-DD HH:mm:ss Z").format("YYYY.MM.DD HH:mm")),1)]),_:1}),l(n,{label:"작업","header-align":"center"},{default:a(t=>[l(P,{justify:"center"},{default:a(()=>[l(C,{span:12},{default:a(()=>[l(u,{class:"w-full",link:"",type:"info",onClick:Y=>c.delContainer(t.row,b)},{default:a(()=>e[27]||(e[27]=[r(" 삭제 ")])),_:2},1032,["onClick"])]),_:2},1024),l(C,{span:12},{default:a(()=>[t.row.State==="exited"?(x(),q(u,{key:0,class:"w-full",link:"",type:"primary",onClick:Y=>c.startContainer(t.row,b)},{default:a(()=>e[28]||(e[28]=[r(" 시작 ")])),_:2},1032,["onClick"])):(x(),q(u,{key:1,class:"w-full",link:"",type:"primary",onClick:Y=>c.stopContainer(t.row,b)},{default:a(()=>e[29]||(e[29]=[r(" 중단 ")])),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),l(M,{name:"2"},{title:a(()=>[e[31]||(e[31]=i("p",null,"이미지 목록",-1)),e[32]||(e[32]=r("     ")),l(u,{link:"",type:"primary",onClick:R(J,["stop"])},{default:a(()=>e[30]||(e[30]=[r(" 추가 ")])),_:1})]),default:a(()=>[l(U,{data:B.value,border:""},{default:a(()=>[l(n,{prop:"ID",label:"이미지 식별자"}),l(n,{prop:"Repository",label:"이미지명"}),l(n,{prop:"Tag",label:"태그 (버전)"}),l(n,{prop:"Size",label:"크기"}),l(n,{label:"생성일시",align:"center"},{default:a(t=>[r(V(T(O)(t.row.CreatedAt,"YYYY-MM-DD HH:mm:ss Z").format("YYYY.MM.DD HH:mm")),1)]),_:1}),l(n,{label:"작업",align:"center"},{default:a(t=>[l(P,{justify:"center"},{default:a(()=>[l(C,{span:12},{default:a(()=>[l(u,{class:"w-full",link:"",type:"info",onClick:Y=>c.delImage(t.row,b)},{default:a(()=>e[33]||(e[33]=[r(" 삭제 ")])),_:2},1032,["onClick"])]),_:2},1024),l(C,{span:12},{default:a(()=>[l(u,{class:"w-full",link:"",type:"primary",onClick:Y=>Z(t.row)},{default:a(()=>e[34]||(e[34]=[r(" 실행 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])]),l(H,{modelValue:y.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value=t),title:"이미지 실행","align-center":""},{default:a(()=>[l(I,{column:2,border:""},{default:a(()=>[l(m,{label:"이미지명",span:2},{default:a(()=>[l(g,{modelValue:f.value.imageName,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value.imageName=t),placeholder:"이미지명",disabled:""},null,8,["modelValue"])]),_:1}),l(m,{label:"컨테이너명",span:2},{default:a(()=>[l(g,{modelValue:f.value.containerName,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value.containerName=t),placeholder:"컨테이너명"},null,8,["modelValue"])]),_:1}),l(m,{label:"외부포트"},{default:a(()=>[l(g,{modelValue:f.value.etrPort,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value.etrPort=t),placeholder:"외부 포트",type:"number"},null,8,["modelValue"])]),_:1}),l(m,{label:"내부포트"},{default:a(()=>[l(g,{modelValue:f.value.itrPort,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value.itrPort=t),placeholder:"내부 포트",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),footer:a(()=>[i("div",{onClick:e[5]||(e[5]=t=>y.value=!1)},"취소"),i("div",{onClick:z},"확인")]),_:1},8,["modelValue"]),l(H,{modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=t=>_.value=t),title:"이미지 추가","align-center":""},{default:a(()=>[l(I,{column:2,border:""},{default:a(()=>[l(m,{label:"이미지명",span:2},{default:a(()=>[l(g,{modelValue:j.value.imageName,"onUpdate:modelValue":e[7]||(e[7]=t=>j.value.imageName=t),placeholder:"이미지명:태그명"},null,8,["modelValue"])]),_:1})]),_:1})]),footer:a(()=>[i("div",{onClick:e[8]||(e[8]=t=>_.value=!1)},"취소"),i("div",{onClick:L},"확인")]),_:1},8,["modelValue"]),l(H,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=t=>D.value=t),title:"프로젝트","align-center":""},{default:a(()=>[l(I,{column:2,border:""},{default:a(()=>[l(m,{label:"프로젝트명","min-width":"100"},{default:a(()=>[l(g,{modelValue:d.value.projectName,"onUpdate:modelValue":e[10]||(e[10]=t=>d.value.projectName=t),placeholder:"프로젝트명"},null,8,["modelValue"])]),_:1}),l(m,{label:"주소","min-width":"100"},{default:a(()=>[l(g,{modelValue:d.value.projectUrl,"onUpdate:modelValue":e[11]||(e[11]=t=>d.value.projectUrl=t),placeholder:"http://www.domain.com"},null,8,["modelValue"])]),_:1}),l(m,{label:"컨테이너명"},{default:a(()=>[l(g,{modelValue:d.value.containerName,"onUpdate:modelValue":e[12]||(e[12]=t=>d.value.containerName=t),placeholder:"컨테이너명"},null,8,["modelValue"])]),_:1}),l(m,{label:"이미지명"},{default:a(()=>[l(g,{modelValue:d.value.imageName,"onUpdate:modelValue":e[13]||(e[13]=t=>d.value.imageName=t),placeholder:"이미지명:태그명"},null,8,["modelValue"])]),_:1}),l(m,{label:"외부포트"},{default:a(()=>[l(g,{modelValue:d.value.etrPort,"onUpdate:modelValue":e[14]||(e[14]=t=>d.value.etrPort=t),placeholder:"외부 포트",type:"number"},null,8,["modelValue"])]),_:1}),l(m,{label:"내부포트"},{default:a(()=>[l(g,{modelValue:d.value.itrPort,"onUpdate:modelValue":e[15]||(e[15]=t=>d.value.itrPort=t),placeholder:"내부 포트",type:"number"},null,8,["modelValue"])]),_:1}),l(m,{label:"도메인"},{default:a(()=>[l($,{modelValue:d.value.domainDate,"onUpdate:modelValue":e[16]||(e[16]=t=>d.value.domainDate=t),type:"daterange","start-placeholder":"도메인 등록일","end-placeholder":"도메인 만료일",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"]),i("div",null,[l(u,{class:"w-full",style:{"margin-top":".5rem"},onClick:h},{default:a(()=>e[35]||(e[35]=[r(" 확인하기 ")])),_:1})])]),_:1}),l(m,{label:"인증서"},{default:a(()=>[i("div",null,[l($,{modelValue:d.value.sslDate,"onUpdate:modelValue":e[17]||(e[17]=t=>d.value.sslDate=t),type:"daterange","start-placeholder":"인증서 등록일","end-placeholder":"인증서 만료일",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),i("div",null,[l(u,{class:"w-full",style:{"margin-top":".5rem"}},{default:a(()=>e[36]||(e[36]=[r(" 등록하기 ")])),_:1})])]),_:1})]),_:1})]),footer:a(()=>[i("div",{onClick:e[18]||(e[18]=t=>D.value=!1)},"취소"),i("div",{onClick:K},"확인")]),_:1},8,["modelValue"])],64)}}};export{ce as default};
