import{_ as N,i as C,r as v,o as D,a as R,b as o,c as u,d as t,w as j,v as T,n as H,e as U,f as y,g as f,t as h,h as k,j as I,k as p,l as A,u as $,m as E,F as V,p as O,q as M,s as F,x as K,y as G,z as J,E as Q,A as W,B as X,C as Z}from"./index-DFO3MUi4.js";import{r as tt,a as et,d as z,b as Y}from"./confirm-DrgE0thk.js";import{_ as lt}from"./ToastEditor-CHBlpRlm.js";const st={class:"comp-cmmt--wrapper"},nt=["maxlength","placeholder"],ot={class:"flex justify-between bg-gray-50 h-12"},at={class:"pl-4 flex items-center"},it={__name:"BoardReplyInput",props:{modelValue:String,width:{type:String,default:"500px"},height:{type:String,default:"90px"},autoResize:{type:Boolean,default:!0},maxLength:{type:Number,default:500},showMaxLength:{type:Boolean,default:!0},placeholder:{type:String,default:"내용 입력"},cmmtUid:{type:Number,default:0},parentUid:{type:Number,default:null},postUid:{type:Number,default:null}},emits:["update:modelValue","submit"],setup(c,{expose:w,emit:d}){const _=C("axios"),l=C("initReplyList"),a=d,n=c,i=v(),m=v();D(()=>{m.value=n.modelValue});const x=()=>{a("update:modelValue",m.value),n.autoResize&&b()},b=()=>{const r=window.getComputedStyle(i.value),e=Number(r.borderTop.split("px")[0])+Number(r.borderBottom.split("px")[0]);i.value.style.height=n.height,i.value.style.height=i.value.scrollHeight+e+"px"},s=()=>{i.value=""},L=()=>{m.value.length&&tt().then(()=>{const r={cmmtUid:n.cmmtUid,postUid:n.postUid,parentCmmtUid:n.parentUid,content:m.value};_.post("/comment",r).then(()=>{et(),a("submit"),l()})})};return w({clear:s}),(r,e)=>{const g=R("el-text");return o(),u("div",{class:"comp-cmmt-input",style:H({width:n.width})},[t("div",st,[j(t("textarea",{onInput:x,"onUpdate:modelValue":e[0]||(e[0]=B=>m.value=B),ref_key:"inputRef",ref:i,rows:"1",maxlength:n.maxLength,style:H({minHeight:n.height}),placeholder:n.placeholder,class:"comp-cmmt-input--content"},null,44,nt),[[T,m.value]]),t("div",ot,[t("div",at,[n.showMaxLength?(o(),U(g,{key:0},{default:y(()=>[f(h(m.value?.length||0)+" / "+h(c.maxLength),1)]),_:1})):k("",!0)]),t("div",{onClick:L,class:I(["flex justify-center bg-gray-300 w-20 h-full cursor-default",{"!bg-[var(--el-color-primary)] !cursor-pointer":m.value?.length}])},[p(g,{class:"!text-white"},{default:y(()=>e[1]||(e[1]=[f(" 등록 ")])),_:1})],2)])])],4)}}},S=N(it,[["__scopeId","data-v-18ce3a38"]]),dt={class:"flex justify-between items-center"},ut={class:"flex items-center gap-x-2"},rt={class:"text-xl font-bold"},pt={key:0,class:"pt-2"},ct={class:"py-2"},mt={key:1,class:"whitespace-pre"},yt={class:"mb-4"},vt={__name:"BoardReply",props:{data:{type:Object,default:null},parent:{type:Object,default:null}},emits:[""],setup(c,{emit:w}){const d=C("axios"),_=C("initReplyList"),l=c,a=v(!1),n=v(),i=A({value:"",ref:null}),m=()=>{z().then(()=>{d.delete(`/comment/${l.data.cmmtUid}`).then(()=>{Y(),_()})})},x=b=>{Array.from(document.querySelectorAll(".comp-cmmt-list--item-input")).forEach(s=>{s!==n.value&&(s.style.display="none")}),n.value.style.display=n.value.style.display==="block"?"none":"block"};return(b,s)=>{const L=R("el-text"),r=R("el-button"),e=R("el-icon");return o(),u(V,null,[t("div",dt,[t("div",ut,[t("div",rt,h(c.data?.user?.nickname),1),p(L,null,{default:y(()=>[f(h($(E)(c.data?.regDttm).format("YYYY.MM.DD(ddd) A hh:mm")),1)]),_:1})]),t("div",null,[p(r,{onClick:m,link:""},{default:y(()=>s[3]||(s[3]=[f(" 삭제 ")])),_:1}),p(r,{onClick:s[0]||(s[0]=g=>a.value=!a.value),link:""},{default:y(()=>s[4]||(s[4]=[f(" 수정 ")])),_:1})])]),l.parent?(o(),u("div",pt,[p(L,null,{default:y(()=>[f("@"+h(l.parent.user?.nickname||"탈퇴한 회원"),1)]),_:1})])):k("",!0),t("div",ct,[a.value?(o(),U(S,{key:0,modelValue:c.data.content,"onUpdate:modelValue":s[1]||(s[1]=g=>c.data.content=g),"post-uid":Number(l.data.postUid),"cmmt-uid":Number(l.data.cmmtUid),"parent-uid":l.parent?.cmmtUid,width:"100%"},null,8,["modelValue","post-uid","cmmt-uid","parent-uid"])):(o(),u("div",mt,h(c.data?.content),1))]),t("div",yt,[p(r,{onClick:x,link:""},{default:y(()=>[p(e,null,{default:y(()=>s[5]||(s[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.49 12 3.75 3.75m0 0-3.75 3.75m3.75-3.75H3.74V4.499"})],-1)])),_:1}),s[6]||(s[6]=t("span",null," 답글 ",-1))]),_:1})]),t("div",{class:"comp-cmmt-list--item-input",style:{display:"none"},ref_key:"inputRef",ref:n},[p(S,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=g=>i.value=g),"post-uid":Number(l.data.postUid),"cmmt-uid":0,"parent-uid":l.data.cmmtUid,width:"100%"},null,8,["modelValue","post-uid","parent-uid"]),s[7]||(s[7]=t("br",null,null,-1)),s[8]||(s[8]=t("br",null,null,-1))],512)],64)}}},_t={class:"comp-cmmt-list"},ft={__name:"BoardReplyList",props:{list:{type:Array,default:[]},parent:{type:Object,default:null},depth:{type:Number,default:0}},emits:[""],setup(c,{emit:w}){C("axios");const d=c;v(),v(!0);const _=l=>{const a=Object.assign({},l);return delete a.children,a};return(l,a)=>{const n=R("BoardReplyList",!0);return o(),u("div",_t,[(o(!0),u(V,null,O(c.list,i=>(o(),u("div",{class:I([d.depth===1?"comp-cmmt-list--children":"comp-cmmt-list--item"])},[p(vt,{data:i,parent:d.parent},null,8,["data","parent"]),i.children?.length?(o(),U(n,{key:0,parent:_(i),list:i.children,depth:d.depth+1},null,8,["parent","list","depth"])):k("",!0)],2))),256))])}}},ht=N(ft,[["__scopeId","data-v-cc5bf4d4"]]),gt={key:0,class:"comp-cmmt--lsit-cnt"},xt={key:1,class:"comp-cmmt-list--empty"},bt={style:{color:"gray"}},kt={__name:"BoardReplyLTree",props:{emptyMsg:{type:String,default:"등록된 댓글이 없습니다"},postUid:{type:[String,Number],default:null}},emits:[""],setup(c,{expose:w,emit:d}){const _=C("axios"),l=c;v();const a=v("0px"),n=v({list:[],totalCount:0}),i=v(!0);return w({initReplyList:()=>{const x=document.getElementById("replyList");a.value=x?window.getComputedStyle(x).height:"0px",i.value=!0,_.get("/comment",{params:{postUid:l.postUid}}).then(b=>{n.value.list=b.data.list,n.value.totalCount=b.data.totalCount}).finally(()=>i.value=!1)}}),(x,b)=>{const s=M("loading");return j((o(),u("div",null,[n.value.totalCount?(o(),u("p",gt," 댓글 "+h(n.value.totalCount)+"개 ",1)):(o(),u("div",xt,[t("p",bt,h(l.emptyMsg),1)])),i.value?(o(),u("div",{key:3,style:H({height:a.value})},null,4)):(o(),U(ht,{key:2,id:"replyList",list:n.value.list},null,8,["list"]))])),[[s,i.value]])}}},wt=N(kt,[["__scopeId","data-v-a114c0c2"]]),Rt={class:"section-area"},Ct={class:"article-area pb-6"},Lt={class:"flex justify-between"},$t={class:"article-area"},Ut={class:"comp-board-detail"},Bt={class:"comp-board-detail--title"},Vt={class:"comp-board-detail--info"},Nt={class:"comp-board-detail--author"},qt={key:0},Ht={class:"comp-board-detail--date"},St={key:0},jt={class:"comp-board-detail--view-cnt"},Dt={key:0},It={class:"comp-board-detail--content"},Mt={class:"article-area comp-cmmt--container !mb-5 !pt-5 border-solid border-x-0 border-b-0 border-t-2"},zt={class:"article-area"},Yt={class:"comp-board-detail--nav mb-5"},Pt={__name:"BoardDetailPage",setup(c){D(()=>{i()});const w=C("axios"),[d,_]=[F(),K()],l=v(),a=v(!0),n=v(),i=()=>{a.value=!0,w.get(`/post/${d.query.pid}`).then(r=>{l.value=r.data,a.value=!1}),m()},m=()=>{n.value.initReplyList()},x=()=>{z().then(()=>{l.value.delYn="Y",w.post("/post",l.value).then(()=>{delete d.query.pid,_.push({name:"게시글 목록",query:d.query}),Y()})})},b=()=>{_.push({name:"게시글 작성",query:d.query})},s=r=>{const e=r+"Post";if(!l.value[e]){Q.alert("게시글이 존재하지 않습니다");return}_.push({name:"게시글 상세",query:{...d.query,pid:l.value[e].postUid}})},L=()=>{delete d.query.pid,_.push({name:"게시글 목록",query:d.query})};return G((r,e)=>{r.query.pid!==e.query.pid&&setTimeout(()=>i(),0)}),J("initReplyList",m),(r,e)=>{const g=R("el-button"),B=R("el-text"),P=M("loading");return o(),u("section",Rt,[t("article",Ct,[t("div",Lt,[t("div",null,[p(g,{onClick:L,icon:$(W)},{default:y(()=>e[3]||(e[3]=[f(" 목록 ")])),_:1},8,["icon"])]),t("div",null,[p(g,{onClick:x,icon:$(X)},{default:y(()=>e[4]||(e[4]=[f("삭제")])),_:1},8,["icon"]),p(g,{onClick:b,icon:$(Z)},{default:y(()=>e[5]||(e[5]=[f("수정")])),_:1},8,["icon"])])])]),j((o(),u("article",$t,[t("div",Ut,[t("div",Bt,[a.value?k("",!0):(o(),u(V,{key:0},[f(h(l.value?.title),1)],64))]),t("div",Vt,[t("div",Nt,[e[6]||(e[6]=t("span",null,"작성자",-1)),a.value?k("",!0):(o(),u("p",qt,h(l.value?.user?.nickname),1))]),t("div",Ht,[e[7]||(e[7]=t("span",null,"등록일",-1)),a.value?k("",!0):(o(),u("p",St,"1일전"))]),t("div",jt,[e[8]||(e[8]=t("span",null,"조회수",-1)),a.value?k("",!0):(o(),u("p",Dt,"@"))])]),t("div",It,[a.value?k("",!0):(o(),u(V,{key:0},[l.value?.content?(o(),U(lt,{key:0,modelValue:l.value.content,"onUpdate:modelValue":e[0]||(e[0]=q=>l.value.content=q),readonly:""},null,8,["modelValue"])):k("",!0)],64))])])])),[[P,a.value]]),t("article",Mt,[p(wt,{"post-uid":$(d).query.pid,ref_key:"replyListRef",ref:n},null,8,["post-uid"]),p(S,{width:"100%",placeholder:"댓글 내용","post-uid":Number($(d).query.pid),"cmmt-uid":null},null,8,["post-uid"])]),t("article",zt,[t("nav",Yt,[t("ul",null,[t("li",{onClick:e[1]||(e[1]=q=>s("next"))},[e[9]||(e[9]=t("span",null,"이전글",-1)),p(B,null,{default:y(()=>[f(h(l.value?.nextPost?.title||"게시글이 존재하지 않습니다"),1)]),_:1})]),t("li",{onClick:e[2]||(e[2]=q=>s("prev"))},[e[10]||(e[10]=t("span",null,"다음글",-1)),p(B,null,{default:y(()=>[f(h(l.value?.prevPost?.title||"게시글이 존재하지 않습니다"),1)]),_:1})])])])])])}}},Ot=N(Pt,[["__scopeId","data-v-59961387"]]);export{Ot as default};
