import{C as w}from"./CodeMng-BqxkYhFm.js";import{m as y,u as B,k as E,r as t,b as L,p as i,o as s,c,a as u,i as N,F as V,j as I,d as b,t as U,z as v,q as D}from"./index-D-cF6HXe.js";import"./confirm-Dtf345b6.js";const F={class:"section-area"},O={class:"article-area"},q={class:"mb-8 space-y-8 lg:flex lg:gap-x-0 lg:space-y-0"},A={class:"lg:w-5/12 h-full"},K={class:"lg:w-7/12 h-full"},Y={key:0},G={__name:"MenuMngPage",setup(j){const f=y("axios");y("msg"),B(),E();const _=t(null),h=t(null);t(null);const m=t([]),n=t([]),g=t(!0);t("first"),t(""),t([]),t(null);const p=t([]);L(()=>{M(),f.get("menu").then(l=>{m.value.push(l.data[0]||{menuId:null,menuNm:"전체"}),_.value.initNodeKeys()}).finally(()=>{g.value=!1})});const x=l=>n.value=l,k=()=>{const e=Array.from(h.value.querySelectorAll("input")).find(o=>!o.disabled);e&&e.focus()},M=()=>{function l(e,o=[]){return e.forEach(r=>{o.push(r),r.children&&r.children.length&&l(r.children,o)}),o}f.get("/route").then(e=>{p.value=Object.assign([],l(e.data))})},C=l=>{console.log("dd : ",l);const e=p.value.find(o=>o.routeId===l);n.value.routeId=e.routeId,n.value.menuNm=e.routeNm,n.value.menuDes=e.routeDes,n.value.useYn="Y"};return(l,e)=>{const o=i("el-divider"),r=i("el-option"),R=i("el-select"),S=i("el-input");return s(),c("section",F,[u("article",O,[u("div",q,[u("div",A,[u("div",null,[N(w,{data:m.value,"save-url":"/menu",filter:"","show-node-key":"","node-key":"menuId","upr-node-key":"uprMenuId","code-type":"MN","tree-props":{label:"menuNm",value:"menuId"},draggable:"",onNodeSelect:x,onKeyupEnter:k,ref_key:"treeRef",ref:_},null,8,["data"])])]),u("div",null,[N(o,{direction:"vertical",class:"!h-full"})]),u("div",K,[u("div",null,[g.value?b("",!0):(s(),c("div",{key:0,ref_key:"formRef",ref:h,class:"space-y-1"},[e[0]||(e[0]=u("p",{class:"text-xl"},"상세보기",-1)),(s(!0),c(V,null,I(Object.keys(m.value[0]),(a,z)=>(s(),c("div",{key:a},[a!="children"?(s(),c("div",Y,[u("p",null,U(a),1),a==="routeId"?(s(),v(R,{key:0,modelValue:n.value[a],"onUpdate:modelValue":d=>n.value[a]=d,onChange:C,filterable:"",clearable:""},{default:D(()=>[(s(!0),c(V,null,I(p.value,d=>(s(),v(r,{key:d.routeNm,label:d.routeNm,value:d.routeId},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(s(),v(S,{key:1,modelValue:n.value[a],"onUpdate:modelValue":d=>n.value[a]=d,disabled:["menuId","uprMenuId","parent","menu","menuOrd"].includes(a)},null,8,["modelValue","onUpdate:modelValue","disabled"]))])):b("",!0)]))),128))],512))])])])])])}}};export{G as default};
