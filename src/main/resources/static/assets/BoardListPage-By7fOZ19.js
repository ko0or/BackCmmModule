import{_ as N,r as C,a as y,q as H,b as r,c,d as t,F as R,p as q,t as u,u as k,m as I,w as O,e as M,f as $,g as B,h as _,l as D,D as P,G as T,H as v,j as z,s as V,x as j,k as p,I as K,J as S,K as F,o as E,i as G,y as J}from"./index-DFO3MUi4.js";const A={class:"comp-board"},Q={class:"comp-board--index comp-board--desktop"},W=["onClick"],X=["onClick"],Y={class:"comp-board--author comp-board--desktop"},Z={class:"comp-board--date comp-board--desktop"},tt={class:"comp-board--view-cnt comp-board--desktop"},et={class:"comp-board--cmmt-cnt comp-board--desktop"},at={class:"comp-board--mobile"},ot={class:"comp-board-mobile--info"},st={class:"comp-board--view-cnt"},nt={class:"comp-board--cmmt-cnt"},lt={key:0},it={colspan:"6",class:"!h-60"},rt={__name:"BoardTable",setup(f,{expose:n}){const o=C([]),d=C(!0);return n({setData:e=>{o.value=Object.assign([],e),d.value=!1},setLoading:e=>{d.value=e}}),(e,a)=>{const i=y("el-text"),b=H("loading");return r(),c("div",A,[t("table",null,[a[2]||(a[2]=t("thead",{class:"comp-board--desktop"},[t("tr",null,[t("td",{class:"comp-board--index"}," 번호 "),t("td",{class:"comp-board--post-title"}," 제목 "),t("td",{class:"comp-board--author"}," 작성자 "),t("td",{class:"comp-board--date"}," 등록일 "),t("td",{class:"comp-board--view-cnt"}," 조회수 "),t("td",{class:"comp-board--cmmt-cnt"}," 댓글수 ")])],-1)),t("tbody",null,[(r(!0),c(R,null,q(o.value,s=>(r(),c("tr",null,[t("td",Q,u(s.postUid),1),t("td",{class:"comp-board--post-title",onClick:l=>e.$emit("rowClick",s.postUid)},u(s.title),9,W),t("td",{class:"comp-board--content comp-board--mobile",onClick:l=>e.$emit("rowClick",s.postUid)}," 쿼리의 수행 순서는 메인 쿼리 -> 서브 쿼리 순으로 동작합니다. 서브쿼리는 결과 건수만큼 반복 수행되기 때문에 조회되는 데이터의 갯수가 적다면 크게 문제될 것은 없지만,조회 되는 데이터의 갯수가 많아지면 많아질 수록 성능이 현저히 떨어지는 모습을 볼 수 있습니다. 또한 스칼라 서브쿼리 사용시 서브쿼리의 결과값이 같은 경우가 많거나, 매번 동일한 결과값을 반환한다면, 스칼라 서브쿼리의 캐싱 효과를 통해 성능을 높일 수 있으나, 서브쿼리에서 사용되는 조건의 종류가 많아지거나 혹은 조건 데이터가 지속적으로 바뀔경우 캐싱의 효율성이 떨어지기 때문에 이전보다 성능이 떨어질 수 있습니다. ",8,X),t("td",Y,u(s.authorNm||"-"),1),t("td",Z,u(k(I)(s.regDttm).fromNow()||"-"),1),t("td",tt,u(s.viewCnt||"0"),1),t("td",et,u(s.cmmtCnt||"0"),1),t("td",at,[t("div",ot,[a[0]||(a[0]=t("p",null," @관리자 · @일전 ",-1)),t("div",null,[t("p",st,"조회수 "+u(s.viewCnt||"0"),1),t("p",nt,"댓글수 "+u(s.cmmtCnt||"0"),1)])])])]))),256)),o.value.length===0?(r(),c("tr",lt,[O((r(),c("td",it,[d.value?_("",!0):(r(),M(i,{key:0},{default:$(()=>a[1]||(a[1]=[B(" 조회결과가 존재하지않습니다 ")])),_:1}))])),[[b,d.value]])])):_("",!0)])])])}}},ct=N(rt,[["__scopeId","data-v-c7ad851d"]]),dt={class:"comp-pagination"},pt=["onClick"],ut={__name:"BoardPager",props:{curPageNum:{type:Number,required:!0},curPageRowCnt:{type:Number,required:!0},totalPageCnt:{type:Number,required:!0},displayBtnCnt:{type:Number,default:5}},setup(f){const n=f,o=D({min:0,max:0,range:P(()=>g()),isLastRange:P(()=>m())}),d=()=>{o.max=Math.ceil(n.totalPageCnt/n.curPageRowCnt),o.min=Math.floor(n.curPageNum/n.displayBtnCnt)*n.displayBtnCnt},g=()=>n.displayBtnCnt+o.min>o.max?o.max%n.displayBtnCnt:n.displayBtnCnt,m=()=>n.displayBtnCnt+o.min>=o.max;return T(()=>n,()=>{d()},{deep:!0,immediate:!0}),(e,a)=>(r(),c("nav",null,[t("ul",dt,[o.min!==0?(r(),c("li",{key:0,class:"comp-pagination--page-item",onClick:a[0]||(a[0]=v(i=>e.$emit("change",0),["prevent"]))},a[4]||(a[4]=[t("div",null," « ",-1)]))):_("",!0),o.min!==0?(r(),c("li",{key:1,class:"comp-pagination--page-item",onClick:a[1]||(a[1]=v(i=>e.$emit("change",o.min-1),["prevent"]))},a[5]||(a[5]=[t("div",null," ‹ ",-1)]))):_("",!0),(r(!0),c(R,null,q(o.range,i=>(r(),c("li",{key:i,class:z(["comp-pagination--page-item",{active:o.min+i===Number(n.curPageNum)+1}])},[t("div",{class:"comp-pagination--page-link",onClick:v(b=>e.$emit("change",o.min+i-1),["prevent"])},u(o.min+i),9,pt)],2))),128)),o.isLastRange?_("",!0):(r(),c("li",{key:2,class:"comp-pagination--page-item",onClick:a[2]||(a[2]=v(i=>e.$emit("change",o.min+n.displayBtnCnt),["prevent"]))},a[6]||(a[6]=[t("div",null," › ",-1)]))),o.isLastRange?_("",!0):(r(),c("li",{key:3,class:"comp-pagination--page-item",onClick:a[3]||(a[3]=v(i=>e.$emit("change",o.max-1),["prevent"]))},a[7]||(a[7]=[t("div",null," » ",-1)])))])]))}},mt=N(ut,[["__scopeId","data-v-a38f51b7"]]),gt={class:"flex justify-between items-center"},_t={class:"flex gap-x-1.5"},bt={__name:"BoardSearch",emits:["submit"],setup(f,{expose:n,emit:o}){const[d,g]=[V(),j()],m=o,e=D({type:"title",keyword:null}),a=()=>{m("submit",Object.assign({},e))};return n({getData:()=>Object.assign({},e),clear:()=>{e.type="title",e.keyword=null}}),(s,l)=>{const w=y("el-option"),L=y("el-select"),U=y("el-input"),x=y("el-button");return r(),c("div",gt,[t("div",_t,[p(L,{modelValue:e.type,"onUpdate:modelValue":l[0]||(l[0]=h=>e.type=h),placeholder:"제목",style:{width:"100px"},class:"!outline-none !border-none"},{default:$(()=>[p(w,{label:"제목",value:"title"}),p(w,{label:"내용",value:"content"}),p(w,{label:"전체",value:"keyword"})]),_:1},8,["modelValue"]),p(U,{modelValue:e.keyword,"onUpdate:modelValue":l[1]||(l[1]=h=>e.keyword=h),placeholder:"검색어 입력",style:{width:"250px"},clearable:"",onKeydown:K(a,["enter"])},null,8,["modelValue"]),p(x,{onClick:a,icon:k(S)},{default:$(()=>l[3]||(l[3]=[B(" 검색 ")])),_:1},8,["icon"])]),t("div",null,[p(x,{onClick:l[2]||(l[2]=h=>k(g).push({name:"게시글 작성",query:k(d).query})),icon:k(F),type:"primary"},{default:$(()=>l[4]||(l[4]=[B(" 게시글 작성 ")])),_:1},8,["icon"])])])}}},vt={class:"section-area"},yt={class:"article-area space-y-2"},Ct={__name:"BoardListPage",setup(f){E(()=>{i()});const[n,o]=[V(),j()],d=G("axios"),g=C(),m=C(),e=C({page:0,size:10,list:[],totalCount:0,totalPages:0}),a=s=>{e.value.page=s},i=()=>{const s=Object.assign(m.value.getData(),e.value);s.boardId=n.query.id,s.sort="postUid,desc",d.get("/post",{params:s}).then(l=>{e.value.totalPages=l.data.totalPages,g.value.setData(l.data.list)})},b=s=>{o.push({name:"게시글 상세",query:Object.assign(n.query,{pid:s})})};return J((s,l)=>{s.query.id!==l.query.id&&(m.value.clear(),setTimeout(()=>i(),0))}),(s,l)=>(r(),c("section",vt,[t("article",yt,[p(bt,{ref_key:"searchRef",ref:m,onSubmit:i},null,512),p(ct,{ref_key:"tbRef",ref:g,onRowClick:b},null,512),p(mt,{"cur-page-num":e.value.page,"cur-page-row-cnt":e.value.size,"total-page-cnt":e.value.totalPages,"display-btn-cnt":5,onChange:a},null,8,["cur-page-num","cur-page-row-cnt","total-page-cnt"])])]))}};export{Ct as default};
