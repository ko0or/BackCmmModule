import{q as r,k as i,b as g}from"./index-Bgq4pUSW.js";const f={__name:"OAuthLoginPage",setup(h){const c=r("axios"),t=r("info"),[a,u]=[i(),i()];g(()=>{const o=a.currentRoute.value.name;if(o==="구글로그인"){const e=a.currentRoute.value.query.code;n("/oauth2/google",{code:e})}else if(o==="카카오로그인"){const e=a.currentRoute.value.query.accessToken;n("/oauth2/kakao",{accessToken:e})}else if(o==="네이버로그인"){const e=a.currentRoute.value.hash.split("#access_token=")[1].split("&")[0];n("/oauth2/naver",{accessToken:e})}});const n=(o,e)=>{c.get(o,{params:e}).then(s=>{t.setLoginStatus(!0),t.setToken(s.data.token),c.get("/user").then(l=>{t.setInfo(l.data),t.setLoginStatus(!0)}).catch(()=>{t.clear()})}).catch(s=>{console.debug(" err : ",s),t.clear()}).finally(()=>{const s=sessionStorage.getItem("LoginBeforePage");s?u.push({path:s}):u.push({name:"메인"})})};return(o,e)=>null}};export{f as default};
